import * as React from 'react';
import { stateTypes } from '../reducers';
import ExploitBoard from '../components/exploit/ExploitBoard';
import { connect } from 'react-redux';
import { getMainHeight, getWidth, getLeftWidth, getRightWidth} from '../selectots/CommonSelectors';
import { getLeftMenu, getLeftSwitch, getLeftDataTree, getBoardMap, getActiveBoardId, getTransformX} from '../selectots/ExploitSelectors';
import { exploitMouseMoveLeft } from '../actions/EnvironmentActions';
import { switchLeftMenu, expandLeftMenu, switchBoardMap, flowTransformX, switchActiveBoardId, updateBoardMap} from '../actions/ExploitActions';
import * as exploitTypes from '../models/exploit';
import { List, Map } from 'immutable';

type propTypes = {
    height: number;
    width: number;
    leftWidth: number;
    rightWidth: number;
    leftMenu: List<exploitTypes.leftMenu>;
    exploitMouseMoveLeft: (leftWidth: number) => void;
    leftSwitch: string;
    switchLeftMenu: (leftSwitch: string) => void;
    expandLeftMenu: (leftData: List<exploitTypes.leftData>, leftSwitch: string) => void;
    leftDataTree: List<exploitTypes.leftData | {}>;
    boardMap: Map<string, any>;
    switchBoardMap: (activeBoardId: string, boardData: any ) => void;
    activeBoardId: string | null;
    transformX: number;
    flowTransformX: (leftWidth: number) => void;
    switchActiveBoardId: (activeBoardId: string) => void;
    updateBoardMap: (boardMap: Map<string, any>) => void;
};

const ExploitContainer = (props: propTypes) => <ExploitBoard {...props} />;

const mapStateToProps = (state: stateTypes) => ({
    height: getMainHeight(state),
    width: getWidth(state),
    leftWidth: getLeftWidth(state),
    rightWidth: getRightWidth(state),
    leftMenu: getLeftMenu(state),
    leftSwitch: getLeftSwitch(state),
    leftDataTree: getLeftDataTree(state),
    boardMap: getBoardMap(state),
    activeBoardId: getActiveBoardId(state),
    transformX: getTransformX(state),
});

export default connect(mapStateToProps, {
    exploitMouseMoveLeft, switchLeftMenu, expandLeftMenu, switchBoardMap, flowTransformX, switchActiveBoardId, updateBoardMap,
})(ExploitContainer);
